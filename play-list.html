<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cá hồi hoang</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,300;1,500;1,600;1,700;1,800;1,900&family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="./assets/font/fontawesome-free-5.15.4-web/css/all.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="stylesheet" href="css/base.css" />
    <link
      rel="stylesheet"
      href="./assets/font/themify-icon/themify-icons.css"
    />
    <link rel="stylesheet" href="./css/playlist.css" />
  </head>
  <body>
    <div class="container-list-music">
      <div class="container-list-music__iner">
        <div class="container-list-music-row">
          <div class="container-list-music-column">
            <div class="container-list-music-column__iner">
              <div class="music-column-item">
                <!-- Background -->
                <div
                  class="music-column__background"
                  style="
                    background-image: url(./assets/img/home/Gallery/background_pll.jpg);
                  "
                >
                  <img
                    src="https://scontent.fsgn8-2.fna.fbcdn.net/v/t1.15752-9/268536091_4615563871861655_1330646515842777196_n.jpg?_nc_cat=100&ccb=1-5&_nc_sid=ae9488&_nc_ohc=uE5mvp4ntKMAX-F5CVl&_nc_ht=scontent.fsgn8-2.fna&oh=03_AVIPpyt2egRf7B9zmyccW57rfL5SCuKPfo_bqG3GrVyIOA&oe=61E74FCE"
                    alt=""
                  />
                  <div class="music-column__background--content">
                    <h4 class="author">Playlist cho vợ tui</h4>
                    <p class="discription">Anh chọn đại nhạc thui</p>
                  </div>
                </div>
                <!-- List -->
                <li class="music-track">
                  <div class="music-cd">
                    <i class="fas fa-compact-disc"></i>
                  </div>
                  <div class="music-heading">
                    <h5 class="music-title" title="Click to play">
                      <span>1. </span>
                      <span>Yêu Quỳnh</span>
                    </h5>
                    <span class="music-info">Anh yêu em</span>
                  </div>
                  <div class="music-action">
                    <span class="track-length">00:31</span>
                    <i class="action-dowload ti-download"></i>
                    <i class="action-play ti-control-play"></i>
                  </div>
                </li>
                <li class="music-track">
                  <div class="music-cd">
                    <i class="fas fa-compact-disc"></i>
                  </div>
                  <div class="music-heading">
                    <h5 class="music-title" title="Click to play">
                      <span>2. </span>
                      <span>Yêu Quỳnh</span>
                    </h5>
                    <span class="music-info">Anh nhớ em</span>
                  </div>
                  <div class="music-action">
                    <span class="track-length">00:31</span>
                    <i class="action-dowload ti-download"></i>
                    <i class="action-play ti-control-play"></i>
                  </div>
                </li>
                <li class="music-track">
                  <div class="music-cd">
                    <i class="fas fa-compact-disc"></i>
                  </div>
                  <div class="music-heading">
                    <h5 class="music-title" title="Click to play">
                      <span>3. </span>
                      <span>Yêu Quỳnh</span>
                    </h5>
                    <span class="music-info">Anh um em</span>
                  </div>
                  <div class="music-action">
                    <span class="track-length">00:31</span>
                    <i class="action-dowload ti-download"></i>
                    <i class="action-play ti-control-play"></i>
                  </div>
                </li>
                <li class="music-track">
                  <div class="music-cd">
                    <i class="fas fa-compact-disc"></i>
                  </div>
                  <div class="music-heading">
                    <h5 class="music-title" title="Click to play">
                      <span>4. </span>
                      <span>Yêu Quỳnh</span>
                    </h5>
                    <span class="music-info">Vợ của tui</span>
                  </div>
                  <div class="music-action">
                    <span class="track-length">00:31</span>
                    <i class="action-dowload ti-download"></i>
                    <i class="action-play ti-control-play"></i>
                  </div>
                </li>
                <li class="music-track">
                  <div class="music-cd">
                    <i class="fas fa-compact-disc"></i>
                  </div>
                  <div class="music-heading">
                    <h5 class="music-title" title="Click to play">
                      <span>5. </span>
                      <span>Yêu Quỳnh</span>
                    </h5>
                    <span class="music-info">Ăn uống đầy đủ nha</span>
                  </div>
                  <div class="music-action">
                    <span class="track-length">00:31</span>
                    <i class="action-dowload ti-download"></i>
                    <i class="action-play ti-control-play"></i>
                  </div>
                </li>
                <li class="music-track">
                  <div class="music-cd">
                    <i class="fas fa-compact-disc"></i>
                  </div>
                  <div class="music-heading">
                    <h5 class="music-title" title="Click to play">
                      <span>6. </span>
                      <span>Yêu Quỳnh</span>
                    </h5>
                    <span class="music-info">Buồn ngủ ghê luôn</span>
                  </div>
                  <div class="music-action">
                    <span class="track-length">00:31</span>
                    <i class="action-dowload ti-download"></i>
                    <i class="action-play ti-control-play"></i>
                  </div>
                </li>
                <li class="music-track">
                  <div class="music-cd">
                    <i class="fas fa-compact-disc"></i>
                  </div>
                  <div class="music-heading">
                    <h5 class="music-title" title="Click to play">
                      <span>7. </span>
                      <span>Yêu Quỳnh</span>
                    </h5>
                    <span class="music-info">Anh yêu em lắm</span>
                  </div>
                  <div class="music-action">
                    <span class="track-length">00:31</span>
                    <i class="action-dowload ti-download"></i>
                    <i class="action-play ti-control-play"></i>
                  </div>
                </li>
                <li class="music-track">
                  <div class="music-cd">
                    <i class="fas fa-compact-disc"></i>
                  </div>
                  <div class="music-heading">
                    <h5 class="music-title" title="Click to play">
                      <span>8. </span>
                      <span>Tương Tư</span>
                    </h5>
                    <span class="music-info">Anh tương tư iem đóa</span>
                  </div>
                  <div class="music-action">
                    <span class="track-length">00:31</span>
                    <i class="action-dowload ti-download"></i>
                    <i class="action-play ti-control-play"></i>
                  </div>
                </li>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      style="background-image: url(./assets/audio/play-list-rsp/tuongtu.mp3)"
    ></div>
  </body>
  <script>
    let isPlay = false;
    const track = document.createElement("audio");
    var indexPlay = 0;
    let songs = [
      {
        path: "./assets/audio/play-list-rsp/ngayhomnaythenao.mp3",
      },
      {
        path: "./assets/audio/play-list-rsp/bonghoakhongthuocveta.mp3",
      },
      {
        path: "./assets/audio/play-list-rsp/exparty.mp3",
      },
      {
        path: "./assets/audio/play-list-rsp/berlin.mp3",
      },
      {
        path: "./assets/audio/play-list-rsp/nghebainaydiem.mp3",
      },
      {
        path: "./assets/audio/play-list-rsp/nightstory.mp3",
      },
      {
        path: "./assets/audio/play-list-rsp/raplove.mp3",
      },
      {
        path: "./assets/audio/play-list-rsp/tuongtu.mp3",
      },
    ];

    function loadTrack(indexPlay) {
      track.src = songs[indexPlay].path;
      track.load();
    }
    function justPlay(indexPlay, indexPre) {
      if (isPlay == false) playSong(indexPlay, indexPre);
      else pauseSong(indexPre);
    }
    let headings = document.querySelectorAll(".music-title");
    let musicList = document.querySelectorAll(".music-track");
    let actionPlay = document.querySelectorAll(".action-play");
    let musicCD = document.querySelectorAll(".music-cd");
    function playSong(indexPlay, indexPre) {
      loadTrack(indexPlay);
      isPlay = true;
      track.play();
      musicList[indexPlay].style.backgroundColor = "#fff";
      actionPlay[indexPlay].classList.add("ti-control-pause");
      actionPlay[indexPlay].classList.remove("ti-control-play");
      musicCD[indexPlay].style.opacity = "1";
      musicCD[indexPlay].style.animation = "rotateAround 3s linear infinite";

      if (indexPre != -1 && indexPlay != indexPre) {
        musicList[indexPre].style.backgroundColor = "rgba(255,255,255,.55)";
        actionPlay[indexPre].classList.remove("ti-control-pause");
        actionPlay[indexPre].classList.add("ti-control-play");
        musicCD[indexPre].style.opacity = "0";
        musicCD[indexPre].style.animation = "none";
      }
    }
    function pauseSong(indexPlay) {
      musicCD[indexPlay].style.opacity = "0";
      actionPlay[indexPlay].classList.remove("ti-control-pause");
      actionPlay[indexPlay].classList.add("ti-control-play");
      musicList[indexPlay].style.backgroundColor = "rgba(255,255,255,.55)";
      musicCD[indexPlay].style.animation = "none";
      isPlay = false;
      track.pause();
    }
    [...headings].forEach((item, index) => {
      item.setAttribute("data-index", index);
    });
    [...actionPlay].forEach((item, index) => {
      item.setAttribute("data-index", index);
    });
    let indexPre = -1;
    let isClick = 0;
    let currentIndex;
    [...actionPlay].forEach((item, index) => {
      item.onclick = function () {
        currentIndex = Number(this.dataset.index);
        if (indexPre != currentIndex) {
          isPlay = false;
          isClick = 0;
        } else {
          if (isClick == 0) {
            isPlay = true;
            isClick = 1;
          } else {
            isPlay = false;
            isClick = 0;
          }
        }
        justPlay(currentIndex, indexPre);
        indexPre = currentIndex;
      };
    });
    [...headings].forEach((item, index) => {
      item.onclick = function () {
        currentIndex = Number(this.dataset.index);
        if (indexPre != currentIndex) {
          isPlay = false;
          isClick = 0;
        } else {
          if (isClick == 0) {
            isPlay = true;
            isClick = 1;
          } else {
            isPlay = false;
            isClick = 0;
          }
        }
        justPlay(currentIndex, indexPre);
        indexPre = Number(currentIndex);
      };
    });
    let nextIndex = 0;
    track.ontimeupdate = function () {
      if (track.currentTime === track.duration) {
        if (currentIndex < songs.length - 1) {
          pauseSong(currentIndex);
          isClick = 1;
          nextIndex = Number(currentIndex + 1);
          playSong(nextIndex, currentIndex);
          indexPre = Number(nextIndex);
          currentIndex = Number(nextIndex);
          isClick = 0;
        } else if (currentIndex == songs.length - 1) {
          pauseSong(currentIndex);
          isClick = 1;
        }
      }
    };
  </script>
</html>
